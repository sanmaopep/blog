闭包是前端开发中的一个重要概念，也是前端面试的必问问题之一。网上有很多关于闭包的教程，然而这些关于闭包的教程往往告诉你闭包长什么样，有什么用，没有给出闭包精确的定义和表达。本文通过整合网上各路资料，对闭包给出一个精准的解释。

## Scope

要理解闭包，先要理解一个重要概念—作用域。

> In computer programming, the scope of a name **binding** – an association of a **name** to an **entity**, such as a variable – is the **region** of a computer program **where the binding is valid**: where the name can be used to refer to the entity. 
>
> Such a region is referred to as a **scope block**.
>
> 参考自[wiki百科 Scope (computer science)](https://en.wikipedia.org/wiki/Scope_(computer_science)#Lexical_scoping)

维基百科上的定义需要从以下几点去解读：

1. scope是一个区域。
2. 在scope内，一个标识符（name）和一个实体存在联系且该**联系**（binding）有效。简单而言，就是说变量在scope里面有效。

scope又可以分为词法作用域（Lexical scope）和动态作用域(Dynamic scope)。两者区别与对**区域**这个概念的解读。Wiki百科对两者的解释如下：

> In languages with lexical scope (also called static scope), name resolution depends on the location in the source code and the **lexical context**, which is defined by where the named variable or function is defined. In contrast, in languages with dynamic scope the name resolution depends upon the program state when the name is encountered which is determined by the **execution context** or calling context. 
>
> 参考自[wiki百科 Scope (computer science)](https://en.wikipedia.org/wiki/Scope_(computer_science)#Lexical_scoping)

在词法作用域中，一个name是否有效取决于它在源代码中的位置，也就是词法上下文。而动态作用域要相对复杂一点，在动态作用域中，一个name是否有效取决于这个程序的运行时状态，也就是运行时上下文。

## First-class function

> In computer science, a programming language is said to have first-class functions if it treats functions as first-class citizens. 
>
> 参考自 [wiki百科 First-class function](https://en.wikipedia.org/wiki/First-class_function)

在学习一些语言的时候，我们经常会听到“函数是一等公民”这样的描述。



## Closure

> In programming languages, closures (also lexical closures or function closures) are techniques for implementing lexically scoped name binding in languages with first-class functions. Operationally, a closure is a record storing a function[a] together with an environment:[1] a mapping associating each free variable of the function (variables that are used locally, but defined in an enclosing scope) with the value or reference to which the name was bound when the closure was created.[b] A closure—unlike a plain function—allows the function to access those captured variables through the closure's copies of their values or references, even when the function is invoked outside their scope.

## 参考资料

[动态作用域和词法域的区别是什么？](https://www.zhihu.com/question/20032419)

[“函数是一等公民”背后的含义](http://blog.leapoahead.com/2015/09/19/function-as-first-class-citizen/)

