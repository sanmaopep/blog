!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e():"function"==typeof define&&define.amd?define(e):e()}(0,function(){"use strict";function t(){var t=this;this._touchHandler=this._touchHandler.bind(this),this._mouseWheel=this._mouseWheel.bind(this),this._triggerMobileNav=this._triggerMobileNav.bind(this),this._untriggerMobileNav=this._untriggerMobileNav.bind(this),this.storyOutterDOM=document.querySelector(".ui-content-story-outter"),this.uiNavItems=document.querySelectorAll(".ui-nav-container li"),this.stories=this.storyOutterDOM.children,this.storiesLen=this.stories.length;for(var e=0;e<this.storiesLen;e++)this.stories[e].style.visibility="hidden",this.stories[e].style.display="none",this.stories[e].style.opacity="0",this.stories[e].style.position="relative",this.stories[e].style.left="-30px";this.curr=0,this._setCurrIndex(0),this.uiNavItems&&function(){var e=t.uiNavItems.length,s=t.uiNavItems[0];s.style.top=t.uiNavItems[t.curr+1].offsetTop-6+"px";for(var i=1;i<e;i++)!function(e){t.uiNavItems[e].addEventListener("mouseover",function(){s.style.top=t.uiNavItems[e].offsetTop-6+"px"}),t.uiNavItems[e].addEventListener("mouseout",function(){t.setCurrIndexBlock||(s.style.top=t.uiNavItems[t.curr+1].offsetTop-6+"px")}),t.uiNavItems[e].addEventListener("click",function(){t._setCurrIndex(e-1),t._untriggerMobileNav()})}(i)}(),this.storyOutterDOM.addEventListener("mousewheel",this._mouseWheel),document.addEventListener("mousewheel",this._mouseWheel),this.trigger=!1,document.querySelector(".ui-mobile-nav-trigger").addEventListener("click",this._triggerMobileNav),document.querySelector(".ui-nav-container").addEventListener("click",function(t){t.stopPropagation()}),document.body.addEventListener("click",this._untriggerMobileNav);var s=document.querySelector(".ui-content-article");s.addEventListener("touchstart",this._touchHandler),s.addEventListener("touchend",this._touchHandler),s.addEventListener("touchmove",this._touchHandler)}t.prototype._touchHandler=function(t){var e=void 0;switch(t.type){case"touchend":if(this.endTouch-this.startTouch>0)0===this.storyOutterDOM.scrollTop&&this._upStory();else{this.storyOutterDOM.scrollTop+this.storyOutterDOM.offsetHeight>=this.storyOutterDOM.scrollHeight&&this._downStory()}break;case"touchstart":e=t.touches[0].clientY,this.startTouch=e;break;case"touchmove":e=t.touches[0].clientY,this.endTouch=e}},t.prototype._triggerMobileNav=function(t){t.stopPropagation();var e=document.querySelector(".ui-nav-container");this.trigger?(e.classList.remove("ui-mobile-show"),this.trigger=!1):(e.classList.add("ui-mobile-show"),this.trigger=!0)},t.prototype._untriggerMobileNav=function(t){var e=document.querySelector(".ui-nav-container");this.trigger&&(e.classList.remove("ui-mobile-show"),this.trigger=!1)},t.prototype._mouseWheel=function(t){var e=this;t.preventDefault(),t.stopPropagation();var s=5,i=setInterval(function(){e.storyOutterDOM.scrollTop+=t.deltaY>0?5*s:-5*s,s--<=0&&clearInterval(i)},25);if(t.deltaY<0)0===this.storyOutterDOM.scrollTop&&this._upStory();else if(t.deltaY>0){this.storyOutterDOM.scrollTop+this.storyOutterDOM.offsetHeight>=this.storyOutterDOM.scrollHeight&&this._downStory()}},t.prototype._setCurrIndex=function(t,e){var s=this;this.setCurrIndexBlock||(this._setUINavPos(t),"number"==typeof t&&(this.curr===t?(this.stories[t].style.display="block",this.setCurrIndexBlock=!0,setTimeout(function(){s.stories[t].style.visibility="visible",s.stories[t].style.opacity="1",s.stories[t].style.left="0px",s.setCurrIndexBlock=!1},250)):(this.stories[this.curr].style.visibility="hidden",this.stories[this.curr].style.opacity="0",this.stories[this.curr].style.left="-30px",this.setCurrIndexBlock=!0,setTimeout(function(){s.stories[s.curr].style.display="none",s.stories[t].style.display="block",setTimeout(function(){s.stories[t].style.visibility="visible",s.stories[t].style.opacity="1",s.stories[t].style.left="0px",s.setCurrIndexBlock=!1,s.curr=t,"function"==typeof e&&e()},250)},250))))},t.prototype._getCurrIndex=function(t){return this.curr},t.prototype._setUINavPos=function(t){this.uiNavItems[0].style.top=this.uiNavItems[t+1].offsetTop-6+"px"},t.prototype._goStory=function(t){t>=0&&t<this.storiesLen&&this._setCurrIndex(t)},t.prototype._upStory=function(){var t=this;this._getCurrIndex()>0&&this._setCurrIndex(this._getCurrIndex()-1,function(){var e=t.storyOutterDOM.offsetHeight,s=t.storyOutterDOM.scrollHeight;t.storyOutterDOM.scrollTop=s-e})},t.prototype._downStory=function(){var t=this;this._getCurrIndex()<this.storiesLen-1&&this._setCurrIndex(this._getCurrIndex()+1,function(){t.storyOutterDOM.scrollTop=0})};new t});
