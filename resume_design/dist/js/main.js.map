{"version":3,"file":"main.js","sources":["../../src/js/lib/nav.js","../../src/js/main.js"],"sourcesContent":["let uiNavItem = document.querySelectorAll(\".ui-nav-container li\");\r\n\r\n// 导航栏select事件\r\nif (uiNavItem) {\r\n    let len = uiNavItem.length;\r\n    let selector = uiNavItem[0];\r\n\r\n    // 初始化\r\n    let uiNavCurr = document.querySelector(\".ui-nav-container li.nav-curr\")\r\n    selector.style.top = uiNavCurr.offsetTop - 6 + \"px\";\r\n\r\n    for (let i = 1; i < len; i++) {\r\n        // 添加事件侦听\r\n        uiNavItem[i].addEventListener('mouseover', () => {\r\n            selector.style.top = uiNavItem[i].offsetTop - 6 + \"px\";\r\n        })\r\n\r\n        uiNavItem[i].addEventListener('mouseout', () => {\r\n            let uiNavCurr = document.querySelector(\".ui-nav-container li.nav-curr\")\r\n            selector.style.top = uiNavCurr.offsetTop - 6 + \"px\";\r\n        })\r\n\r\n    }\r\n}\r\n\r\n// 上下Nav移动\r\nfunction storyState() {\r\n\r\n    this.storyOutterDOM = document.querySelector(\".ui-content-story-outter\");\r\n    this.uiNavItems = uiNavItem;\r\n\r\n    // story全部不可见\r\n    this.stories = this.storyOutterDOM.children;\r\n    this.storiesLen = this.stories.length;\r\n\r\n    for (let i = 0; i < this.storiesLen; i++) {\r\n        this.stories[i].style.visibility = \"hidden\";\r\n        this.stories[i].style.display = \"none\";\r\n        this.stories[i].style.opacity = \"0\";\r\n        this.stories[i].style.position = \"relative\";\r\n        this.stories[i].style.left = \"-30px\";\r\n        // 在CSS中添加transition属性\r\n\r\n    }\r\n\r\n    this.curr = 0;\r\n    this._setCurrIndex(0);\r\n\r\n    // 滚轮事件\r\n    this.storyOutterDOM.addEventListener('mousewheel', event => {\r\n        event.stopPropagation();\r\n        if (event.deltaY < 0) {\r\n            //判断是否滚到头部\r\n            if (this.storyOutterDOM.scrollTop === 0) {\r\n                this._upStory();\r\n            }\r\n\r\n        } else if (event.deltaY > 0) {\r\n            // 判断是否滚到底部\r\n            let scrollTop = this.storyOutterDOM.scrollTop;\r\n            let offsetHeight = this.storyOutterDOM.offsetHeight;\r\n            let scrollHeight = this.storyOutterDOM.scrollHeight;\r\n\r\n            if (scrollTop + offsetHeight >= scrollHeight) {\r\n                this._downStory();\r\n            }\r\n\r\n        }\r\n    })\r\n\r\n\r\n    // TODO 移动端touch事件\r\n}\r\n\r\nstoryState.prototype._setCurrIndex = function (index, cb) {\r\n    // 保护锁\r\n    if (this.setCurrIndexBlock) {\r\n        return;\r\n    }\r\n    if (typeof (index) === \"number\") {\r\n        if (this.curr === index) {\r\n            this.stories[index].style.display = \"block\";\r\n            this.setCurrIndexBlock = true;\r\n            setTimeout(() => {\r\n                this.stories[index].style.visibility = \"visible\";\r\n                this.stories[index].style.opacity = \"1\";\r\n                this.stories[index].style.left = \"0px\";\r\n                this.setCurrIndexBlock = false;\r\n            }, 250);\r\n        } else {\r\n            // 隐藏\r\n            this.stories[this.curr].style.visibility = \"hidden\";\r\n            this.stories[this.curr].style.opacity = \"0\";\r\n            this.stories[this.curr].style.left = \"-30px\";\r\n\r\n            this.setCurrIndexBlock = true;\r\n            setTimeout(() => {\r\n                // 隐藏\r\n                this.stories[this.curr].style.display = \"none\";\r\n                this.stories[index].style.display = \"block\";\r\n                setTimeout(() => {\r\n                    this.stories[index].style.visibility = \"visible\";\r\n                    this.stories[index].style.opacity = \"1\";\r\n                    this.stories[index].style.left = \"0px\";\r\n                    this.setCurrIndexBlock = false;\r\n                    this.curr = index;\r\n                    cb();\r\n                }, 250)\r\n\r\n            }, 250);\r\n        }\r\n    }\r\n}\r\n\r\n\r\nstoryState.prototype._getCurrIndex = function (index) {\r\n    return this.curr;\r\n}\r\n\r\nstoryState.prototype._goStory = function (index) {\r\n\r\n}\r\n\r\nstoryState.prototype._upStory = function () {\r\n    if (this._getCurrIndex() > 0) {\r\n        this._setCurrIndex(this._getCurrIndex() - 1, () => {\r\n            let offsetHeight = this.storyOutterDOM.offsetHeight;\r\n            let scrollHeight = this.storyOutterDOM.scrollHeight;\r\n            this.storyOutterDOM.scrollTop = scrollHeight - offsetHeight;\r\n        })\r\n    }\r\n}\r\n\r\nstoryState.prototype._downStory = function () {\r\n    if (this._getCurrIndex() < this.storiesLen - 1) {\r\n        this._setCurrIndex(this._getCurrIndex() + 1, () => {\r\n            this.storyOutterDOM.scrollTop = 0;\r\n        })\r\n    }\r\n}\r\n\r\nlet _storyState = new storyState();\r\n\r\n","'use strict';\r\n\r\nimport foo from './lib/sr';\r\nimport nav from './lib/nav';\r\n\r\n"],"names":["uiNavItem","document","querySelectorAll","len","length","selector","uiNavCurr","querySelector","style","top","offsetTop","i","addEventListener","storyState","storyOutterDOM","uiNavItems","stories","children","storiesLen","visibility","display","opacity","position","left","curr","_setCurrIndex","event","stopPropagation","deltaY","scrollTop","_upStory","offsetHeight","scrollHeight","_downStory","prototype","index","cb","setCurrIndexBlock","_getCurrIndex","_goStory","_storyState"],"mappings":"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"}